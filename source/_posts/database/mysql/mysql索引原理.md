title: mysql 索引原理及添加索引的原理
date: 2017-12-08 15:58
tags:
- mysql
- 数据库
categories: mysql
comments: true

---
我们都知道索引可以加快查询速度，但是具体是怎么实现的对查询速度的提升却知之甚少，本文就带大家拨开索引的神秘面纱，一探其底层实现。

在不加索引的情况，如果我们需要对一个数据量比较大的表进行查询，根据查询条件，mysql引擎就需要对整个表从头开始逐行扫描，直到检索到对应记录。这对于数据量比较小的表来讲是没问题的，但是如果表记录数到百万甚至千万级别，对整个表的扫描时间将会提升到一个不可忍受的地步，甚至会造成数据库卡死。通常在这种情况下我们会对需要检索的字段增加索引，以加快其检索速度。下图就是一个对比，可以很明显看出索引和未索引的情况下所需查询时间巨大差异。


接下来我们就来分析下为什么索引能加快查询速度，先打个比方，平时我们在看书如果想找到某个具体的知识点，都是先打开书目录进行查找，然后根据目录显示的章节所在页数直接翻到对应页面查看，索引的作用就类似书籍目录的作用，只不过索引是根据数据量的变化动态变化的，而一本书的目录通常是不会有变化的。

innodb存储引擎支持两种常见的索引：B+树索引和哈希索引。B+树是为磁盘或其他直接存取辅助设备而设计的一种平衡查找树，在B+树中，所有记录节点都是按键值的大小顺序存放在同一层的叶节点中，各叶节点指针进行连接。

索引分类：唯一索引、联合索引

建立索引的原则：

1、列数据区分度比较大

2、数据量比较小的表无需创建索引，创建索引只会造成存储空间的浪费

3、对于需要查询整张表数据的业务也无需创建索引

4、数据值比较大，比如TEXT、BLOB类型的数据不适合构建索引
